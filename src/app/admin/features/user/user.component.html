<div class="card">
    <p-table
      #dt
      [value]="customers"
      [(selection)]="selectedCustomers"
      dataKey="id"
      [rowHover]="true"
      [rows]="10"
      [showCurrentPageReport]="true"
      [rowsPerPageOptions]="[10, 25, 50]"
      [paginator]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [filterDelay]="0"
      [globalFilterFields]="['firstname','email', 'lastname']"
    >
    <ng-template pTemplate="caption">
        <div class="flex justify-content-between">
          
            <p-iconField iconPosition="left">
                <p-inputIcon>
                    <i class="pi pi-search"></i>
                </p-inputIcon>
                <input pInputText type="text" [(ngModel)]="searchValue" (input)="dt.filterGlobal($event.target.value, 'contains')" placeholder="Keyboard Search" />
            </p-iconField>
        </div>
    </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 4rem">
            <p-tableHeaderCheckbox />
          </th>
          <th pSortableColumn="id" style="min-width: 14rem">
            <div class="flex justify-content-between align-items-center">
              ID
              <p-sortIcon field="id" />
            </div>
          </th>
          <th pSortableColumn="name" style="min-width: 14rem">
            <div class="flex justify-content-between align-items-center">
              Name
              <p-sortIcon field="name" />
            </div>
          </th>
  
          <th pSortableColumn="gender" style="min-width: 10rem">
            <div class="flex justify-content-between align-items-center">
              Gender
              <p-sortIcon field="gender" />
            </div>
          </th>
  
          <th pSortableColumn="dateOfBirth" style="min-width: 10rem">
            <div class="flex justify-content-between align-items-center">
              Date of Birth
              <p-sortIcon field="dateOfBirth" />
            </div>
          </th>
  
          <th pSortableColumn="email" style="min-width: 10rem">
            <div class="flex justify-content-between align-items-center">
              Email
              <p-sortIcon field="email" />
            </div>
          </th>
  
          <th pSortableColumn="password" style="min-width: 10rem">
            <div class="flex justify-content-between align-items-center">
              Password
              <p-sortIcon field="password" />
            </div>
          </th>
  
          <th pSortableColumn="role" style="min-width: 10rem">
            <div class="flex justify-content-between align-items-center">
              Role
              <p-sortIcon field="role" />
            </div>
          </th>
  
          <th pSortableColumn="createdAt" style="min-width: 10rem">
            <div class="flex justify-content-between align-items-center">
              created at
              <p-sortIcon field="createdAt" />
            </div>
          </th>
  
          <th pSortableColumn="updatedAt" style="min-width: 10rem">
            <div class="flex justify-content-between align-items-center">
              updatedAt
              <p-sortIcon field="updatedAt" />
            </div>
          </th>
          <th style="width: 5rem"></th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-customer>
        <tr class="p-selectable-row">
          <td>
            <p-tableCheckbox [value]="customer" />
          </td>
          <td>
            <span class="p-column-title">ID</span>
            {{ customer.id }}
          </td>
          <td>
            <span class="p-column-title">Name</span>
            {{ customer.firstname + customers.lastname }}
          </td>
          <td>
            <span class="p-column-title">Name</span>
            {{ getGender(customer.gender) }}
          </td>
          <td>
            <span class="p-column-title">dateofBirth</span>
            {{ customer.dateOfBirth | date : "MM/dd/yyyy" }}
          </td>
          <td>
            <span class="p-column-title">Email</span>
            {{ customer.email }}
          </td>
          <td>
            <span class="p-column-title">Password</span>
            {{ customer.password }}
          </td>
          <td>
            <span class="p-column-title">Role</span>
            {{ customer.role }}
          </td>
          <td>
            <span class="p-column-title">createdAt</span>
            {{ customer.createdAt }}
          </td>
          <td>
            <span class="p-column-title">Updateat</span>
            {{ customer.updatedAt }}
          </td>
          <td class="button-user" style="text-align: center">
            <p-button
                class="btn-user"
              (onClick)="showUserDialog(customer)"
              severity="secondary"
              icon="pi pi-cog"
            />

            <p-button
                class="btn-user"
              (onClick)="confirmDeleteUser(customer)"
              severity="secondary"
              icon="pi pi-times"
            />
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="8">No customers found.</td>
        </tr>
      </ng-template>
    </p-table>
  
    <p-dialog
      header="User Information"
      [(visible)]="dialogVisible"
      [style]="{ width: '30vw' }"
    >
      <div *ngIf="selectedUser">
        <div class="row-element">
          <label for="name">First Name:</label>
          <input
            type="text"
            [(ngModel)]="selectedUser.firstname"
            placeholder="-"
          />
        </div>

        <div class="row-element">
            <label for="name">Last Name:</label>
            <input
              type="text"
              [(ngModel)]="selectedUser.lastname"
              placeholder="-"
            />
        </div>

        <div class="row-element">
          <label for="dateOfBirth">Date of Birth:</label>
          <input
            type="text"
            [(ngModel)]="selectedUser.dateOfBirth"
            placeholder="-"
          />
        </div>
        <div class="row-element">
            <label for="Gender">Gender:</label>
            <p-radioButton 
                name="gender" 
                [value] = "true"
                [(ngModel)]="selectedUser.gender" 
                inputId="male"
                />
            <label for="male" class="ml-2">
                Nam
            </label>

            <p-radioButton 
                name="gender" 
                [value]= "false"
                [(ngModel)]= 'selectedUser.gender'
                inputId="female"
                />
            <label for="female" class="ml-2">
                Ná»¯
            </label>
          </div>

          <div class="row-element">
            <label for="email">Email:</label>
            <input type="email" [(ngModel)]="selectedUser.email" placeholder="-" />
          </div>

          <div class="row-element">
            <label for="password">Password:</label>
            <input type="password" [(ngModel)]="selectedUser.password" placeholder="-" />
          </div>
      </div>
      <p-footer>
        <button
            class="btn"
          type="button"
          pButton
          label="Save"
          icon="pi pi-check"
          (click)="saveUser()"
        ></button>
        <button
            class="btn"
          type="button"
          pButton
          label="Close"
          icon="pi pi-times"
          (click)="closeDialog()"
        ></button>
      </p-footer>
    </p-dialog>

    <p-dialog header="Confirm Delete" [(visible)]="displayDeleteDialog" [modal]="true" [closable]="false">
        <p>Are you sure you want to delete user?</p>
        <p-footer>
          <p-button class="btn-user-delete" label="No" icon="pi pi-times" (onClick)="displayDeleteDialog = false"></p-button>
          <p-button class="btn-user-delete" label="Yes" icon="pi pi-check" (onClick)="deleteUser()" [severity]="'danger'"></p-button>
        </p-footer>
      </p-dialog>
  </div>